---
title: 'Assinaturas'
description: 'Gerencie planos, pagamentos e assinaturas da sua conta'
---

## Vis√£o Geral

A API de Assinaturas permite gerenciar informa√ß√µes de planos, acessar portal de pagamentos e consultar status de assinatura.

<CardGroup cols={2}>
  <Card
    title="Status da Assinatura"
    icon="circle-check"
    href="/api-reference/subscriptions/status"
  >
    Consulte informa√ß√µes do plano atual
  </Card>
  <Card
    title="Criar Checkout"
    icon="cart-shopping"
    href="/api-reference/subscriptions/checkout"
  >
    Gere sess√£o de checkout para upgrade
  </Card>
  <Card
    title="Portal de Pagamento"
    icon="credit-card"
    href="/api-reference/subscriptions/portal"
  >
    Acesse portal de gerenciamento
  </Card>
</CardGroup>

## Planos Dispon√≠veis

### Free
**Ideal para testes e projetos pequenos**

- ‚úÖ 1.000 cr√©ditos/m√™s
- ‚úÖ 3 contas de an√∫ncios
- ‚úÖ 10 campanhas ativas
- ‚úÖ 1.000 requisi√ß√µes/dia
- ‚úÖ Suporte via email
- ‚úÖ Reten√ß√£o de dados: 30 dias

**Pre√ßo**: Gr√°tis

### Pro
**Para neg√≥cios em crescimento**

- ‚úÖ 10.000 cr√©ditos/m√™s
- ‚úÖ 10 contas de an√∫ncios
- ‚úÖ 100 campanhas ativas
- ‚úÖ 10.000 requisi√ß√µes/dia
- ‚úÖ Suporte priorit√°rio
- ‚úÖ Reten√ß√£o de dados: 90 dias
- ‚úÖ Webhooks ilimitados
- ‚úÖ An√°lises avan√ßadas

**Pre√ßo**: R$ 99/m√™s ou R$ 990/ano (2 meses gr√°tis)

### Enterprise
**Para grandes opera√ß√µes**

- ‚úÖ Cr√©ditos ilimitados
- ‚úÖ Contas de an√∫ncios ilimitadas
- ‚úÖ Campanhas ilimitadas
- ‚úÖ 100.000 requisi√ß√µes/dia
- ‚úÖ Suporte dedicado 24/7
- ‚úÖ Reten√ß√£o de dados: 365 dias
- ‚úÖ SLA de 99.9% uptime
- ‚úÖ Onboarding personalizado
- ‚úÖ IP dedicado (opcional)

**Pre√ßo**: Sob consulta

## Casos de Uso

### Verificar Status da Assinatura

```javascript
async function getSubscriptionStatus() {
  const response = await fetch(
    'https://api.monitoragrupo.com/v1/subscriptions/status',
    { headers: { 'Authorization': 'Bearer YOUR_TOKEN' } }
  );
  
  const data = await response.json();
  
  return {
    plan: data.plan_name,
    status: data.status,
    creditsRemaining: data.credits_remaining,
    renewsAt: new Date(data.renews_at),
    daysUntilRenewal: Math.ceil(
      (new Date(data.renews_at) - new Date()) / (1000 * 60 * 60 * 24)
    )
  };
}

// Uso
const subscription = await getSubscriptionStatus();
console.log(`üì¶ Plano: ${subscription.plan}`);
console.log(`üí≥ Status: ${subscription.status}`);
console.log(`ü™ô Cr√©ditos: ${subscription.creditsRemaining.toLocaleString()}`);
console.log(`üìÖ Renova em: ${subscription.daysUntilRenewal} dias`);
```

### Fluxo de Upgrade

```javascript
class SubscriptionManager {
  constructor(authToken) {
    this.token = authToken;
    this.baseUrl = 'https://api.monitoragrupo.com/v1';
  }
  
  async createUpgradeFlow(targetPlan) {
    // 1. Verificar plano atual
    const current = await this.getCurrentPlan();
    
    if (current.plan === targetPlan) {
      throw new Error('Voc√™ j√° est√° neste plano');
    }
    
    // 2. Criar sess√£o de checkout
    const checkout = await fetch(`${this.baseUrl}/subscriptions/checkout`, {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${this.token}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        plan: targetPlan,
        billing_cycle: 'monthly',
        success_url: 'https://app.example.com/upgrade/success',
        cancel_url: 'https://app.example.com/upgrade/cancel'
      })
    }).then(r => r.json());
    
    // 3. Redirecionar usu√°rio
    return {
      checkoutUrl: checkout.url,
      sessionId: checkout.session_id,
      expiresAt: checkout.expires_at
    };
  }
  
  async getCurrentPlan() {
    const response = await fetch(`${this.baseUrl}/subscriptions/status`, {
      headers: { 'Authorization': `Bearer ${this.token}` }
    });
    return await response.json();
  }
  
  async cancelSubscription(reason) {
    const response = await fetch(`${this.baseUrl}/subscriptions/cancel`, {
      method: 'POST',
      headers: {
        'Authorization': `Bearer ${this.token}`,
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        reason,
        feedback: 'optional feedback text',
        cancel_at_period_end: true // Manter at√© fim do per√≠odo pago
      })
    });
    
    return await response.json();
  }
}

// Uso
const manager = new SubscriptionManager('YOUR_TOKEN');

// Fazer upgrade
const upgrade = await manager.createUpgradeFlow('pro');
window.location.href = upgrade.checkoutUrl;

// Ou cancelar
const cancellation = await manager.cancelSubscription('switching_providers');
console.log(`Cancelamento agendado para: ${cancellation.cancel_at}`);
```

### Portal de Autoatendimento

```python
import requests

class BillingPortal:
    def __init__(self, auth_token):
        self.headers = {'Authorization': f'Bearer {auth_token}'}
        self.base_url = 'https://api.monitoragrupo.com/v1'
    
    def get_portal_url(self, return_url='https://app.example.com/settings'):
        """Gera URL para portal de gerenciamento de assinatura"""
        response = requests.post(
            f'{self.base_url}/subscriptions/portal',
            headers=self.headers,
            json={'return_url': return_url}
        )
        
        data = response.json()
        return data['url']
    
    def get_billing_history(self, limit=12):
        """Retorna hist√≥rico de cobran√ßas"""
        response = requests.get(
            f'{self.base_url}/subscriptions/invoices?limit={limit}',
            headers=self.headers
        )
        
        invoices = response.json()['invoices']
        
        return [{
            'date': invoice['created_at'],
            'amount': invoice['amount_paid'],
            'status': invoice['status'],
            'pdf_url': invoice['invoice_pdf']
        } for invoice in invoices]
    
    def update_payment_method(self):
        """Redireciona para atualiza√ß√£o de m√©todo de pagamento"""
        portal_url = self.get_portal_url()
        
        # No portal, usu√°rio pode:
        # - Atualizar cart√£o de cr√©dito
        # - Ver hist√≥rico de cobran√ßas
        # - Baixar notas fiscais
        # - Cancelar assinatura
        
        return portal_url
    
    def get_usage_report(self):
        """Relat√≥rio de uso do per√≠odo atual"""
        response = requests.get(
            f'{self.base_url}/subscriptions/usage',
            headers=self.headers
        )
        
        data = response.json()
        
        return {
            'period_start': data['period_start'],
            'period_end': data['period_end'],
            'credits_used': data['credits_used'],
            'credits_limit': data['credits_limit'],
            'api_requests': data['api_requests'],
            'overage_credits': max(0, data['credits_used'] - data['credits_limit']),
            'estimated_overage_charge': max(0, data['credits_used'] - data['credits_limit']) * 0.01
        }

# Uso
portal = BillingPortal('YOUR_TOKEN')

# Acessar portal
portal_url = portal.get_portal_url()
print(f"üîó Portal: {portal_url}")

# Ver cobran√ßas
history = portal.get_billing_history(6)
for invoice in history:
    print(f"{invoice['date']}: R$ {invoice['amount']} - {invoice['status']}")

# Relat√≥rio de uso
usage = portal.get_usage_report()
print(f"\nüí∞ Uso do per√≠odo:")
print(f"   Cr√©ditos: {usage['credits_used']:,} / {usage['credits_limit']:,}")
print(f"   Requisi√ß√µes: {usage['api_requests']:,}")

if usage['overage_credits'] > 0:
    print(f"   ‚ö†Ô∏è Overage: {usage['overage_credits']:,} cr√©ditos (R$ {usage['estimated_overage_charge']:.2f})")
```

### Webhooks de Assinatura

Configure webhooks para receber eventos de cobran√ßa:

```javascript
// Eventos poss√≠veis:
const events = {
  'subscription.created': 'Nova assinatura criada',
  'subscription.updated': 'Plano alterado',
  'subscription.canceled': 'Assinatura cancelada',
  'subscription.renewed': 'Renova√ß√£o bem-sucedida',
  'payment.succeeded': 'Pagamento aprovado',
  'payment.failed': 'Pagamento falhou',
  'invoice.created': 'Nova fatura gerada',
  'invoice.paid': 'Fatura paga',
  'trial.ending': 'Trial acabando em 3 dias'
};

// Exemplo de payload
const webhookPayload = {
  event: 'payment.succeeded',
  data: {
    subscription_id: 'sub_abc123',
    plan: 'pro',
    amount: 99.00,
    currency: 'BRL',
    paid_at: '2026-01-09T14:30:00Z',
    invoice_url: 'https://billing.example.com/invoice/inv_xyz',
    next_billing_date: '2026-02-09'
  },
  timestamp: '2026-01-09T14:30:05Z'
};
```

## Ciclo de Faturamento

### Mensal
- Cobran√ßa todo dia do m√™s da assinatura
- Cr√©ditos renovam automaticamente
- Pode cancelar a qualquer momento
- Sem multa de cancelamento

### Anual
- Cobran√ßa √∫nica com desconto
- Economia de 20% (2 meses gr√°tis)
- Cr√©ditos mensais por 12 meses
- Reembolso proporcional se cancelar (primeiros 30 dias)

## Pol√≠ticas

### Upgrade
- ‚úÖ Efeito imediato
- ‚úÖ Cr√©dito proporcional do plano anterior
- ‚úÖ Cr√©ditos adicionais dispon√≠veis instantaneamente
- ‚úÖ Sem cobran√ßa dupla

### Downgrade
- ‚è≥ Efeito no pr√≥ximo ciclo de cobran√ßa
- ‚ö†Ô∏è Cr√©ditos n√£o utilizados expiram
- üìß Notifica√ß√£o 7 dias antes

### Cancelamento
- Acesso mantido at√© fim do per√≠odo pago
- Dados preservados por 90 dias
- Exporta√ß√£o de dados dispon√≠vel
- Pode reativar a qualquer momento

## Gerenciamento de Cr√©ditos

### Cr√©ditos Extras

```json
{
  "purchase_credits": {
    "quantity": 5000,
    "price_per_credit": 0.01,
    "total": 50.00,
    "validity": "90_days"
  }
}
```

### Pacotes de Cr√©ditos

| Quantidade | Pre√ßo Unit. | Total | Economia |
|------------|-------------|-------|----------|
| 1.000 | R$ 0,015 | R$ 15 | - |
| 5.000 | R$ 0,012 | R$ 60 | 20% |
| 10.000 | R$ 0,010 | R$ 100 | 33% |
| 50.000 | R$ 0,008 | R$ 400 | 47% |

## FAQ

<AccordionGroup>
  <Accordion title="Posso mudar de plano a qualquer momento?">
    Sim! Upgrades s√£o imediatos. Downgrades entram em vigor no pr√≥ximo ciclo de cobran√ßa.
  </Accordion>
  
  <Accordion title="O que acontece se eu exceder o limite de cr√©ditos?">
    Planos Free: Servi√ßos pausam at√© pr√≥ximo ciclo. Planos pagos: Cobran√ßa de overage (R$ 0,01/cr√©dito).
  </Accordion>
  
  <Accordion title="Posso usar cr√©ditos de um m√™s no outro?">
    N√£o. Cr√©ditos mensais expiram ao final de cada ciclo. Apenas cr√©ditos extras comprados t√™m validade de 90 dias.
  </Accordion>
  
  <Accordion title="Voc√™s oferecem per√≠odo de teste?">
    Sim! Plano Pro tem 14 dias gr√°tis. Nenhum cart√£o necess√°rio para come√ßar.
  </Accordion>
  
  <Accordion title="Como funciona o reembolso?">
    Garantia de 30 dias para planos anuais. Reembolso proporcional calculado por dia n√£o utilizado.
  </Accordion>
</AccordionGroup>

## Seguran√ßa de Pagamentos

<Note>
  Todos os pagamentos s√£o processados via **Stripe**, com certifica√ß√£o PCI DSS Level 1. N√£o armazenamos dados de cart√£o de cr√©dito.
</Note>

**M√©todos aceitos:**
- üí≥ Cart√£o de cr√©dito (Visa, Mastercard, Amex)
- üí≥ Cart√£o de d√©bito
- üè¶ Boleto banc√°rio (apenas Brasil)
- üí∞ Pix (apenas Brasil)
- üåê PayPal (internacional)

## Integra√ß√µes Relacionadas

<CardGroup cols={2}>
  <Card
    title="Accounts"
    icon="user"
    href="/api-reference/accounts/overview"
  >
    Gerencie informa√ß√µes da conta
  </Card>
  <Card
    title="Credits"
    icon="coins"
    href="/api-reference/credits/overview"
  >
    Monitore consumo de cr√©ditos
  </Card>
  <Card
    title="Webhooks"
    icon="webhook"
    href="/webhooks/overview"
  >
    Receba eventos de cobran√ßa
  </Card>
  <Card
    title="Dashboard"
    icon="chart-line"
    href="https://dashboard.monitoragrupo.com"
  >
    Acesse o painel de controle
  </Card>
</CardGroup>
