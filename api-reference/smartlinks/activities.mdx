---
title: 'Listar Atividades da Campanha'
api: 'GET /smartlinks/campaign/{campaignId}/activities'
description: 'Retorna hist√≥rico detalhado de cliques e entradas de uma campanha'
---

## Descri√ß√£o

Este endpoint retorna o hist√≥rico completo de atividades (cliques e entradas) de uma campanha SmartLink espec√≠fica. Ideal para an√°lises, relat√≥rios e monitoramento de performance em tempo real.

<Note>
  Suporta filtros avan√ßados por tipo, per√≠odo e pagina√ß√£o customizada para datasets grandes.
</Note>

## Autentica√ß√£o

<CodeGroup>
```bash Bearer Token
Authorization: Bearer seu_token_jwt
```

```bash API Token
x-api-token: seu_api_token
```
</CodeGroup>

## Path Parameters

<ParamField path="campaignId" type="string" required>
  Identificador da campanha. Aceita UUID ou c√≥digo curto (short code).
  
  **Formatos aceitos:**
  - UUID: `f47ac10b-58cc-4372-a567-0e02b2c3d479`
  - Short code: `ABC123`, `3M8NZ5`
</ParamField>

## Query Parameters

<ParamField query="page" type="number" default="1">
  N√∫mero da p√°gina para pagina√ß√£o.
  
  **M√≠nimo**: 1
  
  **Exemplo**: `?page=2`
</ParamField>

<ParamField query="limit" type="number" default="100">
  Quantidade de itens por p√°gina.
  
  **M√≠nimo**: 1  
  **M√°ximo**: 500  
  **Padr√£o**: 100
  
  **Exemplo**: `?limit=50`
</ParamField>

<ParamField query="type" type="string">
  Filtrar por tipo de atividade.
  
  **Valores poss√≠veis:**
  - `click` - Apenas cliques no link
  - `entry` - Apenas entradas confirmadas no grupo
  
  **Exemplo**: `?type=click`
</ParamField>

<ParamField query="startDate" type="string">
  Data inicial para filtro de per√≠odo (inclusive).
  
  **Formato**: `YYYY-MM-DD`
  
  **Exemplo**: `?startDate=2026-01-01`
</ParamField>

<ParamField query="endDate" type="string">
  Data final para filtro de per√≠odo (inclusive).
  
  **Formato**: `YYYY-MM-DD`
  
  **Exemplo**: `?endDate=2026-01-09`
</ParamField>

<ParamField query="deviceType" type="string">
  Filtrar por tipo de dispositivo.
  
  **Valores poss√≠veis:**
  - `mobile`
  - `desktop`
  - `tablet`
  
  **Exemplo**: `?deviceType=mobile`
</ParamField>

<ParamField query="sortBy" type="string" default="occurred_at">
  Campo para ordena√ß√£o.
  
  **Valores poss√≠veis:**
  - `occurred_at` - Data da ocorr√™ncia
  - `device_type` - Tipo de dispositivo
  - `activity_type` - Tipo de atividade
  
  **Exemplo**: `?sortBy=occurred_at`
</ParamField>

<ParamField query="sortOrder" type="string" default="desc">
  Ordem da classifica√ß√£o.
  
  **Valores poss√≠veis:**
  - `asc` - Crescente (mais antigo primeiro)
  - `desc` - Decrescente (mais recente primeiro)
  
  **Exemplo**: `?sortOrder=asc`
</ParamField>

## Response

<ResponseField name="data" type="array" required>
  Lista de atividades da campanha.
  
  <Expandable title="Propriedades da Atividade">
    <ResponseField name="id" type="string">
      ID √∫nico da atividade (UUID)
    </ResponseField>
    
    <ResponseField name="occurred_at" type="string">
      Data e hora da ocorr√™ncia (ISO 8601)
    </ResponseField>
    
    <ResponseField name="activity_type" type="string">
      Tipo de atividade: `click` ou `entry`
    </ResponseField>
    
    <ResponseField name="device_type" type="string">
      Tipo de dispositivo: `mobile`, `desktop`, ou `tablet`
    </ResponseField>
    
    <ResponseField name="browser_name" type="string">
      Nome do navegador (ex: Chrome, Safari, Firefox)
    </ResponseField>
    
    <ResponseField name="browser_version" type="string">
      Vers√£o do navegador
    </ResponseField>
    
    <ResponseField name="os_name" type="string">
      Nome do sistema operacional (ex: Android, iOS, Windows)
    </ResponseField>
    
    <ResponseField name="os_version" type="string">
      Vers√£o do sistema operacional
    </ResponseField>
    
    <ResponseField name="ip_address" type="string">
      Endere√ßo IP do usu√°rio (anonymizado conforme LGPD)
    </ResponseField>
    
    <ResponseField name="user_agent" type="string">
      User agent completo do navegador
    </ResponseField>
    
    <ResponseField name="referrer" type="string">
      URL de refer√™ncia (de onde veio o clique)
    </ResponseField>
    
    <ResponseField name="target_group_name" type="string">
      Nome do grupo do WhatsApp de destino
    </ResponseField>
    
    <ResponseField name="target_group_id" type="string">
      ID do grupo de destino
    </ResponseField>
    
    <ResponseField name="location" type="object">
      Dados de geolocaliza√ß√£o (quando dispon√≠vel)
      
      <Expandable title="Propriedades">
        <ResponseField name="country" type="string">
          Pa√≠s (c√≥digo ISO)
        </ResponseField>
        <ResponseField name="country_name" type="string">
          Nome do pa√≠s
        </ResponseField>
        <ResponseField name="region" type="string">
          Estado/regi√£o
        </ResponseField>
        <ResponseField name="city" type="string">
          Cidade
        </ResponseField>
      </Expandable>
    </ResponseField>
    
    <ResponseField name="utm_params" type="object">
      Par√¢metros UTM capturados (quando presentes)
      
      <Expandable title="Propriedades">
        <ResponseField name="utm_source" type="string">
          Fonte da campanha
        </ResponseField>
        <ResponseField name="utm_medium" type="string">
          Meio de marketing
        </ResponseField>
        <ResponseField name="utm_campaign" type="string">
          Nome da campanha
        </ResponseField>
        <ResponseField name="utm_term" type="string">
          Termo de busca
        </ResponseField>
        <ResponseField name="utm_content" type="string">
          Identificador de conte√∫do
        </ResponseField>
      </Expandable>
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="meta" type="object" required>
  Metadados de pagina√ß√£o e estat√≠sticas.
  
  <Expandable title="Propriedades">
    <ResponseField name="page" type="number">
      P√°gina atual
    </ResponseField>
    
    <ResponseField name="limit" type="number">
      Itens por p√°gina
    </ResponseField>
    
    <ResponseField name="total" type="number">
      Total de atividades encontradas
    </ResponseField>
    
    <ResponseField name="totalPages" type="number">
      Total de p√°ginas dispon√≠veis
    </ResponseField>
    
    <ResponseField name="hasNextPage" type="boolean">
      Indica se existe pr√≥xima p√°gina
    </ResponseField>
    
    <ResponseField name="hasPreviousPage" type="boolean">
      Indica se existe p√°gina anterior
    </ResponseField>
    
    <ResponseField name="summary" type="object">
      Resumo estat√≠stico das atividades
      
      <Expandable title="Propriedades">
        <ResponseField name="total_clicks" type="number">
          Total de cliques
        </ResponseField>
        <ResponseField name="total_entries" type="number">
          Total de entradas
        </ResponseField>
        <ResponseField name="conversion_rate" type="number">
          Taxa de convers√£o em porcentagem
        </ResponseField>
        <ResponseField name="unique_ips" type="number">
          IPs √∫nicos
        </ResponseField>
      </Expandable>
    </ResponseField>
  </Expandable>
</ResponseField>

<RequestExample>

```bash cURL
curl --request GET \
  --url 'https://api.example.com/v1/smartlinks/campaign/ABC123/activities?type=click&page=1&limit=50&startDate=2026-01-01' \
  --header 'Authorization: Bearer YOUR_TOKEN'
```

```javascript JavaScript
const campaignId = 'ABC123';

const params = new URLSearchParams({
  type: 'click',
  page: 1,
  limit: 50,
  startDate: '2026-01-01',
  endDate: '2026-01-09'
});

const response = await fetch(
  `https://api.example.com/v1/smartlinks/campaign/${campaignId}/activities?${params}`,
  {
    headers: {
      'Authorization': 'Bearer YOUR_TOKEN'
    }
  }
);

const data = await response.json();
console.log(`Total de atividades: ${data.meta.total}`);
console.log(`Taxa de convers√£o: ${data.meta.summary.conversion_rate}%`);
```

```python Python
import requests
from datetime import datetime, timedelta

campaign_id = 'ABC123'

# √öltimos 7 dias
end_date = datetime.now().strftime('%Y-%m-%d')
start_date = (datetime.now() - timedelta(days=7)).strftime('%Y-%m-%d')

params = {
    'type': 'click',
    'page': 1,
    'limit': 50,
    'startDate': start_date,
    'endDate': end_date
}

response = requests.get(
    f'https://api.example.com/v1/smartlinks/campaign/{campaign_id}/activities',
    headers={'Authorization': 'Bearer YOUR_TOKEN'},
    params=params
)

data = response.json()
print(f"Total de atividades: {data['meta']['total']}")
print(f"Taxa de convers√£o: {data['meta']['summary']['conversion_rate']}%")
```

```php PHP
<?php
$campaignId = 'ABC123';

$params = http_build_query([
    'type' => 'click',
    'page' => 1,
    'limit' => 50,
    'startDate' => '2026-01-01',
    'endDate' => '2026-01-09'
]);

$curl = curl_init();
curl_setopt_array($curl, [
  CURLOPT_URL => "https://api.example.com/v1/smartlinks/campaign/{$campaignId}/activities?{$params}",
  CURLOPT_RETURNTRANSFER => true,
  CURLOPT_HTTPHEADER => [
    "Authorization: Bearer YOUR_TOKEN"
  ]
]);

$response = curl_exec($curl);
$data = json_decode($response, true);

echo "Total de atividades: " . $data['meta']['total'] . "\n";
echo "Taxa de convers√£o: " . $data['meta']['summary']['conversion_rate'] . "%";
curl_close($curl);
?>
```

</RequestExample>

<ResponseExample>

```json Sucesso
{
  "data": [
    {
      "id": "e5bf7f72-9183-43fd-a8bd-a89b6e35b11f",
      "occurred_at": "2026-01-09T10:34:35.567Z",
      "activity_type": "click",
      "device_type": "mobile",
      "browser_name": "Chrome",
      "browser_version": "120.0.0",
      "os_name": "Android",
      "os_version": "14",
      "ip_address": "192.168.*.***",
      "user_agent": "Mozilla/5.0 (Linux; Android 14) AppleWebKit/537.36...",
      "referrer": "https://instagram.com",
      "target_group_name": "Promo√ß√£o Black Friday #01",
      "target_group_id": "cc2be923-9984-4089-9dbd-9206ece0b847",
      "location": {
        "country": "BR",
        "country_name": "Brasil",
        "region": "SP",
        "city": "S√£o Paulo"
      },
      "utm_params": {
        "utm_source": "instagram",
        "utm_medium": "social",
        "utm_campaign": "black_friday_2026"
      }
    },
    {
      "id": "f6cg8g83-a294-54ge-b9cd-b9ac7f46c22g",
      "occurred_at": "2026-01-09T10:32:18.123Z",
      "activity_type": "entry",
      "device_type": "mobile",
      "browser_name": "Safari",
      "browser_version": "17.2",
      "os_name": "iOS",
      "os_version": "17.2.1",
      "ip_address": "177.45.*.***",
      "target_group_name": "Promo√ß√£o Black Friday #01",
      "target_group_id": "cc2be923-9984-4089-9dbd-9206ece0b847",
      "location": {
        "country": "BR",
        "country_name": "Brasil",
        "region": "RJ",
        "city": "Rio de Janeiro"
      }
    }
  ],
  "meta": {
    "page": 1,
    "limit": 50,
    "total": 904,
    "totalPages": 19,
    "hasNextPage": true,
    "hasPreviousPage": false,
    "summary": {
      "total_clicks": 624,
      "total_entries": 280,
      "conversion_rate": 44.87,
      "unique_ips": 512
    }
  }
}
```

```json Campanha N√£o Encontrada
{
  "error": {
    "code": "not_found",
    "message": "Campanha n√£o encontrada",
    "status": 404,
    "details": {
      "campaign_id": "INVALID"
    }
  }
}
```

```json Par√¢metros Inv√°lidos
{
  "error": {
    "code": "validation_error",
    "message": "Par√¢metros de consulta inv√°lidos",
    "status": 400,
    "details": {
      "errors": [
        {
          "field": "limit",
          "message": "Limite m√°ximo √© 500"
        },
        {
          "field": "startDate",
          "message": "Formato de data inv√°lido. Use YYYY-MM-DD"
        }
      ]
    }
  }
}
```

</ResponseExample>

## C√≥digos de Status

| C√≥digo | Descri√ß√£o |
|--------|-----------|
| `200` | Atividades retornadas com sucesso |
| `400` | Par√¢metros de consulta inv√°lidos |
| `401` | Token de autentica√ß√£o inv√°lido |
| `404` | Campanha n√£o encontrada |
| `429` | Limite de taxa excedido |
| `500` | Erro interno do servidor |

## Casos de Uso

### Dashboard de An√°lise

```javascript
async function getCampaignAnalytics(campaignId, days = 7) {
  const endDate = new Date().toISOString().split('T')[0];
  const startDate = new Date(Date.now() - days * 24 * 60 * 60 * 1000)
    .toISOString().split('T')[0];

  const response = await fetch(
    `https://api.example.com/v1/smartlinks/campaign/${campaignId}/activities?` +
    `startDate=${startDate}&endDate=${endDate}&limit=500`,
    { headers: { 'Authorization': 'Bearer YOUR_TOKEN' } }
  );

  const data = await response.json();

  // An√°lise por dispositivo
  const deviceStats = data.data.reduce((acc, activity) => {
    acc[activity.device_type] = (acc[activity.device_type] || 0) + 1;
    return acc;
  }, {});

  // An√°lise por navegador
  const browserStats = data.data.reduce((acc, activity) => {
    acc[activity.browser_name] = (acc[activity.browser_name] || 0) + 1;
    return acc;
  }, {});

  // An√°lise por hor√°rio
  const hourlyStats = data.data.reduce((acc, activity) => {
    const hour = new Date(activity.occurred_at).getHours();
    acc[hour] = (acc[hour] || 0) + 1;
    return acc;
  }, {});

  return {
    summary: data.meta.summary,
    deviceBreakdown: deviceStats,
    browserBreakdown: browserStats,
    hourlyDistribution: hourlyStats,
    totalActivities: data.meta.total
  };
}

// Uso
const analytics = await getCampaignAnalytics('ABC123', 7);
console.log('An√°lise dos √∫ltimos 7 dias:', analytics);
```

### Exportar Relat√≥rio CSV

```python
import requests
import csv
from datetime import datetime

def export_activities_to_csv(campaign_id, output_file='activities.csv'):
    """Exporta todas as atividades para CSV"""
    all_activities = []
    page = 1
    
    while True:
        response = requests.get(
            f'https://api.example.com/v1/smartlinks/campaign/{campaign_id}/activities',
            headers={'Authorization': 'Bearer YOUR_TOKEN'},
            params={'page': page, 'limit': 500}
        )
        
        data = response.json()
        all_activities.extend(data['data'])
        
        if not data['meta']['hasNextPage']:
            break
        
        page += 1
    
    # Escrever CSV
    with open(output_file, 'w', newline='', encoding='utf-8') as f:
        writer = csv.DictWriter(f, fieldnames=[
            'id', 'occurred_at', 'activity_type', 'device_type',
            'browser_name', 'os_name', 'ip_address', 'country',
            'target_group_name'
        ])
        
        writer.writeheader()
        for activity in all_activities:
            writer.writerow({
                'id': activity['id'],
                'occurred_at': activity['occurred_at'],
                'activity_type': activity['activity_type'],
                'device_type': activity['device_type'],
                'browser_name': activity['browser_name'],
                'os_name': activity['os_name'],
                'ip_address': activity['ip_address'],
                'country': activity.get('location', {}).get('country_name', 'N/A'),
                'target_group_name': activity['target_group_name']
            })
    
    print(f'‚úÖ {len(all_activities)} atividades exportadas para {output_file}')

# Uso
export_activities_to_csv('ABC123')
```

### Monitoramento em Tempo Real

```javascript
class ActivityMonitor {
  constructor(campaignId, authToken) {
    this.campaignId = campaignId;
    this.authToken = authToken;
    this.lastActivityId = null;
  }

  async pollNewActivities(intervalMs = 30000) {
    setInterval(async () => {
      const activities = await this.getLatestActivities();
      const newActivities = this.lastActivityId
        ? activities.filter(a => a.occurred_at > this.lastActivityId)
        : activities;

      if (newActivities.length > 0) {
        this.onNewActivities(newActivities);
        this.lastActivityId = newActivities[0].occurred_at;
      }
    }, intervalMs);
  }

  async getLatestActivities() {
    const response = await fetch(
      `https://api.example.com/v1/smartlinks/campaign/${this.campaignId}/activities?limit=10&sortOrder=desc`,
      { headers: { 'Authorization': `Bearer ${this.authToken}` } }
    );
    const data = await response.json();
    return data.data;
  }

  onNewActivities(activities) {
    console.log(`üîî ${activities.length} novas atividades:`,);
    activities.forEach(activity => {
      console.log(`  - ${activity.activity_type} de ${activity.device_type} em ${activity.occurred_at}`);
    });
  }
}

// Uso
const monitor = new ActivityMonitor('ABC123', 'YOUR_TOKEN');
monitor.pollNewActivities(30000); // Poll a cada 30 segundos
```

## Notas Importantes

<Warning>
  **Reten√ß√£o de Dados**: Atividades s√£o mantidas por 90 dias. Para an√°lises hist√≥ricas maiores, exporte os dados regularmente.
</Warning>

<Tip>
  **Performance**: Para datasets grandes (>10.000 atividades), use filtros de data para reduzir o tempo de resposta.
</Tip>

<Note>
  **Privacidade**: Endere√ßos IP s√£o parcialmente anonimizados conforme LGPD. Os √∫ltimos octetos s√£o mascarados.
</Note>

## Melhores Pr√°ticas

1. **Use pagina√ß√£o**: N√£o tente buscar todas as atividades de uma vez
2. **Filtre por per√≠odo**: Sempre use `startDate` e `endDate` para melhor performance
3. **Cache de relat√≥rios**: Implemente cache para relat√≥rios que n√£o precisam ser em tempo real
4. **Limite adequado**: Use `limit=100-200` para balan√ßo entre performance e requisi√ß√µes
5. **Export incremental**: Para exporta√ß√µes, processe em lotes usando pagina√ß√£o

## Webhooks Relacionados

Configure webhooks para ser notificado em tempo real:
- `activity.click` - Novo clique registrado
- `activity.entry` - Nova entrada no grupo
- `activity.conversion_milestone` - Marcos de convers√£o atingidos (100, 500, 1000, etc.)

Veja [Webhooks](/webhooks/overview) para mais detalhes.
